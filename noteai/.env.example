# NoteAI 环境配置文件示例
# 复制此文件为 .env 并填入实际值

# =============================================================================
# 环境配置
# =============================================================================
ENVIRONMENT=development
DEBUG=true
APP_NAME=NoteAI
APP_VERSION=1.0.0

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL (用户数据)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=noteai
POSTGRES_PASSWORD=noteai_dev_pass
POSTGRES_DB=noteai_users

# MongoDB (笔记和AI会话)
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USER=noteai
MONGODB_PASSWORD=noteai_dev_pass
MONGODB_DB=noteai_notes

# Redis (缓存和消息队列)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=noteai_dev_pass
REDIS_DB=0

# Elasticsearch (搜索)
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USER=
ELASTICSEARCH_PASSWORD=

# =============================================================================
# 安全配置
# =============================================================================

# JWT配置
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# CORS配置
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# AI服务配置
# =============================================================================

# DeepSeek配置 (主要AI提供商)
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_MAX_TOKENS=4000
DEEPSEEK_TEMPERATURE=0.7

# OpenAI配置 (备用AI提供商)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# AI服务配置
AI_REQUEST_TIMEOUT=30
AI_MAX_RETRIES=3
AI_CACHE_TTL=1800

# AI配额配置
FREE_USER_MONTHLY_LIMIT=50
PREMIUM_USER_MONTHLY_LIMIT=1000
FREE_USER_DAILY_LIMIT=10
PREMIUM_USER_DAILY_LIMIT=100

# =============================================================================
# 服务配置
# =============================================================================

# 服务端口
USER_SERVICE_PORT=8001
AI_SERVICE_PORT=8002
NOTE_SERVICE_PORT=8003
API_GATEWAY_PORT=8000

# 服务URL (用于服务间通信)
USER_SERVICE_URL=http://localhost:8001
AI_SERVICE_URL=http://localhost:8002
NOTE_SERVICE_URL=http://localhost:8003

# 文件上传配置
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,text/markdown
UPLOAD_PATH=/tmp/noteai_uploads

# 分页配置
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# =============================================================================
# 第三方服务配置
# =============================================================================

# 邮件服务 (用于发送验证邮件等)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true
FROM_EMAIL=noreply@noteai.com

# 对象存储 (用于文件上传)
OSS_PROVIDER=local
# 如果使用阿里云OSS
OSS_ACCESS_KEY_ID=your-oss-access-key
OSS_ACCESS_KEY_SECRET=your-oss-secret-key
OSS_BUCKET=noteai-files
OSS_ENDPOINT=oss-cn-hangzhou.aliyuncs.com
# 如果使用AWS S3
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_BUCKET=noteai-files
AWS_REGION=us-east-1

# 监控服务
SENTRY_DSN=your-sentry-dsn-here
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# =============================================================================
# 开发工具配置
# =============================================================================

# 数据库管理工具
ADMINER_ENABLED=true
MONGO_EXPRESS_ENABLED=true
REDIS_COMMANDER_ENABLED=true

# 开发模式配置
HOT_RELOAD=true
AUTO_RELOAD=true
SHOW_SQL=true

# =============================================================================
# 生产环境配置 (仅在生产环境使用)
# =============================================================================

# SSL配置
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/noteai.crt
SSL_KEY_PATH=/etc/ssl/private/noteai.key

# 性能配置
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65

# 安全配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# 备份配置
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# =============================================================================
# Docker配置
# =============================================================================

# Docker Compose配置
COMPOSE_PROJECT_NAME=noteai
COMPOSE_FILE=docker-compose.dev.yml

# 容器资源限制
POSTGRES_MEMORY_LIMIT=512m
MONGODB_MEMORY_LIMIT=512m
REDIS_MEMORY_LIMIT=256m
ELASTICSEARCH_MEMORY_LIMIT=1g

# =============================================================================
# 测试配置
# =============================================================================

# 测试数据库
TEST_POSTGRES_DB=noteai_users_test
TEST_MONGODB_DB=noteai_notes_test
TEST_REDIS_DB=1

# 测试配置
TEST_USER_EMAIL=test@noteai.com
TEST_USER_PASSWORD=TestPass123!
TEST_ADMIN_EMAIL=admin@noteai.com
TEST_ADMIN_PASSWORD=AdminPass123!
