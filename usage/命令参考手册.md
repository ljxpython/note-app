# BMad-Method 命令参考手册

## 📋 命令概览

BMad-Method 提供两种环境下的命令系统：Web UI 和 IDE 环境。本手册提供完整的命令参考。

## 🌐 Web UI 命令

### 基础命令

#### `*help`
**功能**：显示所有可用命令和代理列表
**使用场景**：初次使用或需要查看选项时
```bash
*help
```

#### `*kb`
**功能**：访问BMad方法知识库
**使用场景**：需要了解BMad工作流程和最佳实践时
```bash
*kb
```

#### `#bmad-orchestrator`
**功能**：询问BMad工作流程相关问题
**使用场景**：对流程有疑问或需要指导时
```bash
#bmad-orchestrator 我应该什么时候从Web UI切换到IDE？
```

### 代理切换命令

#### `*analyst`
**功能**：切换到分析师代理
**职责**：市场研究、竞争分析、项目简介创建
```bash
*analyst
# 然后描述您的项目想法
```

#### `*pm`
**功能**：切换到产品经理代理
**职责**：PRD文档创建、需求管理、史诗故事定义
```bash
*pm
# 基于项目简介创建PRD文档
```

#### `*architect`
**功能**：切换到架构师代理
**职责**：系统架构设计、技术选型、设计模式
```bash
*architect
# 基于PRD设计系统架构
```

#### `*ux-expert`
**功能**：切换到UX专家代理
**职责**：用户体验设计、界面规范、交互设计
```bash
*ux-expert
# 创建用户体验规范
```

#### `*po`
**功能**：切换到产品负责人代理
**职责**：需求验证、文档分片、质量检查
```bash
*po
# 运行主检查清单验证文档一致性
```

## 💻 IDE 命令

### 代理调用语法

不同IDE使用不同的语法：

**Cursor/Windsurf**：使用 `@` 符号
```bash
@agent_name 命令描述
```

**Claude Code**：使用 `/` 符号
```bash
/agent_name 命令描述
```

### 规划阶段命令

#### 分析师命令
```bash
@analyst 为我的项目进行市场研究
@analyst 分析竞争对手的优势和劣势
@analyst 创建项目简介文档
@analyst 定义目标用户群体
```

#### 产品经理命令
```bash
@pm 基于项目简介创建PRD文档
@pm 为用户认证功能创建详细需求
@pm 定义史诗和用户故事
@pm 创建验收标准清单
```

#### 架构师命令
```bash
@architect 基于PRD设计系统架构
@architect 推荐适合的技术栈
@architect 设计数据库架构
@architect 创建API设计规范
```

#### UX专家命令
```bash
@ux-expert 创建用户体验规范
@ux-expert 设计用户流程图
@ux-expert 定义交互设计模式
@ux-expert 创建可用性检查清单
```

### 开发阶段命令

#### 产品负责人命令
```bash
@po 分片PRD文档到史诗
@po 分片架构文档
@po 验证故事草稿
@po 运行质量检查清单
```

#### Scrum Master命令
```bash
@sm 从用户认证史诗创建下一个开发故事
@sm 分析当前进度并规划下一步
@sm 创建任务分解清单
@sm 评估故事复杂度和优先级
```

#### 开发者命令
```bash
@dev 实现用户登录功能
@dev 为购物车功能编写测试
@dev 修复支付流程中的错误
@dev 重构用户管理模块
@dev 优化数据库查询性能
```

### QA代理专用命令

QA代理有一套专门的命令系统，用于质量保证：

#### `*risk` - 风险评估
**功能**：评估故事实施风险
**使用时机**：故事草稿完成后，开发开始前
```bash
@qa *risk user-authentication-story
```

**输出**：
- 风险类别识别（技术、安全、性能等）
- 风险评分（1-9级）
- 缓解策略建议
- 质量门控影响评估

#### `*design` - 测试设计
**功能**：创建测试策略和设计
**使用时机**：风险评估后，开发开始前
```bash
@qa *design user-authentication-story
```

**输出**：
- 测试场景设计
- 测试级别建议（单元/集成/E2E）
- 优先级分类（P0/P1/P2）
- 测试数据需求
- CI/CD集成策略

#### `*trace` - 需求追踪
**功能**：验证测试覆盖率和需求追踪
**使用时机**：开发过程中的检查点
```bash
@qa *trace user-authentication-story
```

**输出**：
- 需求到测试的映射
- 覆盖率差距识别
- Given-When-Then格式文档
- 可追溯性矩阵

#### `*nfr` - 非功能性需求评估
**功能**：验证质量属性
**使用时机**：开发过程中或早期审查
```bash
@qa *nfr user-authentication-story
```

**输出**：
- 安全性评估
- 性能分析
- 可靠性检查
- 可维护性评估

#### `*review` - 综合审查
**功能**：完整的质量评估和代码改进
**使用时机**：故事标记为"准备审查"后
```bash
@qa *review user-authentication-story
```

**输出**：
- 需求可追溯性分析
- 测试级别分析
- 覆盖率评估
- 主动代码重构
- 质量门控决策

#### `*gate` - 质量门控
**功能**：更新质量门控状态
**使用时机**：审查修复后或状态需要更新时
```bash
@qa *gate user-authentication-story
```

**输出**：
- 质量门控决策（PASS/CONCERNS/FAIL/WAIVED）
- 决策理由
- 建议行动
- 风险接受文档

## 🔧 实用工具命令

### 代码库扁平化工具
```bash
# 基本使用
npx bmad-method flatten

# 指定输入目录
npx bmad-method flatten --input /path/to/source

# 指定输出文件
npx bmad-method flatten --output my-project.xml

# 组合使用
npx bmad-method flatten --input /path/to/source --output /path/to/output.xml
```

### 安装和更新命令
```bash
# 安装或更新BMad-Method
npx bmad-method install

# 使用稳定版本
npx bmad-method@stable install

# 如果已克隆仓库
git pull
npm run install:bmad
```

## 📊 命令使用流程

### Web UI典型流程
```bash
1. *help                    # 查看可用选项
2. *analyst                 # 开始项目分析
3. *pm                      # 创建PRD文档
4. *architect               # 设计系统架构
5. *ux-expert              # 设计用户体验（可选）
6. *po                      # 验证文档一致性
7. #bmad-orchestrator       # 获取下一步指导
```

### IDE典型流程
```bash
1. @po 分片PRD文档到史诗
2. @po 分片架构文档
3. @sm 创建第一个开发故事
4. @qa *risk story-name     # 风险评估（可选）
5. @qa *design story-name   # 测试设计（可选）
6. @dev 实现功能
7. @qa *review story-name   # 质量审查
8. @qa *gate story-name     # 更新门控状态
```

## 🎯 命令选择指南

### 何时使用Web UI命令
- ✅ 项目规划阶段
- ✅ 需要大上下文思考
- ✅ 成本敏感的场景
- ✅ 团队协作讨论

### 何时使用IDE命令
- ✅ 代码实现阶段
- ✅ 需要文件系统访问
- ✅ 版本控制集成
- ✅ 调试和测试

### QA命令使用时机
- `*risk` + `*design`：故事开发前
- `*trace` + `*nfr`：开发过程中
- `*review`：开发完成后
- `*gate`：修复问题后

## 🚨 常见错误和解决方案

### Web UI命令错误
```bash
# 错误：命令不被识别
help  # ❌ 缺少*前缀

# 正确：
*help # ✅

# 错误：代理切换失败
analyst # ❌ 缺少*前缀

# 正确：
*analyst # ✅
```

### IDE命令错误
```bash
# 错误：语法不正确
pm 创建PRD # ❌ 缺少@或/前缀

# 正确：
@pm 创建PRD # ✅ (Cursor/Windsurf)
/pm 创建PRD # ✅ (Claude Code)
```

### QA命令错误
```bash
# 错误：缺少*前缀
@qa risk story-name # ❌

# 正确：
@qa *risk story-name # ✅
```

---

**提示**：将此手册加入书签，在使用BMad-Method时随时参考！ 📖
