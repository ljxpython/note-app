# Story 1.1.1: åŸºç¡€æ–‡æœ¬ä¼˜åŒ–
## AIé©±åŠ¨çš„æ–‡æœ¬ä¼˜åŒ–å»ºè®®ç³»ç»Ÿ

**Story ID**: STORY-001  
**Epic**: Epic 1.1 - AIé©±åŠ¨çš„å†…å®¹ä¼˜åŒ–  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-17  
**BMad Master**: AI BMad Master  
**ä¼˜å…ˆçº§**: P0 (æœ€é«˜)  
**ä¼°ç®—**: 8 Story Points  

---

## ğŸ“‹ ç”¨æˆ·æ•…äº‹

### æ ¸å¿ƒç”¨æˆ·æ•…äº‹
**ä½œä¸º** å†…å®¹åˆ›ä½œè€…  
**æˆ‘å¸Œæœ›** é€‰ä¸­ä¸€æ®µæ–‡æœ¬åè·å¾—AIä¼˜åŒ–å»ºè®®  
**ä»¥ä¾¿** æ”¹å–„æ–‡æœ¬çš„è¡¨è¾¾è´¨é‡å’Œå¯è¯»æ€§  

### è¯¦ç»†åœºæ™¯
1. **åœºæ™¯1**: ç”¨æˆ·åœ¨ç¼–è¾‘å™¨ä¸­é€‰ä¸­ä¸€æ®µæ–‡å­—ï¼Œç³»ç»Ÿè‡ªåŠ¨æ˜¾ç¤ºä¼˜åŒ–å»ºè®®
2. **åœºæ™¯2**: ç”¨æˆ·ä¸»åŠ¨è¯·æ±‚å¯¹ç‰¹å®šæ®µè½è¿›è¡Œä¼˜åŒ–
3. **åœºæ™¯3**: ç”¨æˆ·æ‰¹é‡ä¼˜åŒ–æ•´ç¯‡æ–‡æ¡£çš„å¤šä¸ªæ®µè½

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- [ ] **æ–‡æœ¬é€‰æ‹©**: ç”¨æˆ·å¯ä»¥é€‰ä¸­ä»»æ„æ–‡æœ¬æ®µè½ (1-1000å­—ç¬¦)
- [ ] **å“åº”æ—¶é—´**: ç³»ç»Ÿåœ¨3ç§’å†…è¿”å›ä¼˜åŒ–å»ºè®®
- [ ] **ä¼˜åŒ–ç±»å‹**: ä¼˜åŒ–å»ºè®®åŒ…æ‹¬è¯­æ³•ä¿®æ­£ã€è¡¨è¾¾æ”¹è¿›ã€ç»“æ„è°ƒæ•´
- [ ] **æ“ä½œé€‰æ‹©**: ç”¨æˆ·å¯ä»¥ä¸€é”®åº”ç”¨æˆ–æ‹’ç»å»ºè®®
- [ ] **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒä¸­è‹±æ–‡æ··åˆæ–‡æœ¬ä¼˜åŒ–
- [ ] **å»ºè®®è´¨é‡**: AIä¼˜åŒ–å»ºè®®é‡‡çº³ç‡ > 60%

### æŠ€æœ¯éªŒæ”¶æ ‡å‡†
- [ ] **APIé›†æˆ**: DeepSeek APIæˆåŠŸé›†æˆå¹¶ç¨³å®šè°ƒç”¨
- [ ] **é”™è¯¯å¤„ç†**: ç½‘ç»œå¼‚å¸¸ã€APIé™æµç­‰é”™è¯¯åœºæ™¯å¤„ç†å®Œå–„
- [ ] **ç¼“å­˜æœºåˆ¶**: ç›¸åŒæ–‡æœ¬çš„ä¼˜åŒ–ç»“æœç¼“å­˜30åˆ†é’Ÿ
- [ ] **å¹¶å‘å¤„ç†**: æ”¯æŒåŒæ—¶å¤„ç†100ä¸ªä¼˜åŒ–è¯·æ±‚
- [ ] **æ•°æ®å®‰å…¨**: ç”¨æˆ·æ–‡æœ¬æ•°æ®åŠ å¯†ä¼ è¾“å’Œå­˜å‚¨

### ç”¨æˆ·ä½“éªŒéªŒæ”¶æ ‡å‡†
- [ ] **ç•Œé¢å“åº”**: é€‰ä¸­æ–‡æœ¬å500mså†…æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- [ ] **å»ºè®®å±•ç¤º**: ä¼˜åŒ–å»ºè®®ä»¥æ°”æ³¡å½¢å¼æ¸…æ™°å±•ç¤º
- [ ] **æ“ä½œä¾¿æ·**: æ”¯æŒé”®ç›˜å¿«æ·é”®æ“ä½œ (Ctrl+O)
- [ ] **è§†è§‰åé¦ˆ**: åº”ç”¨å»ºè®®åæœ‰æ˜ç¡®çš„è§†è§‰åé¦ˆ
- [ ] **æ’¤é”€åŠŸèƒ½**: æ”¯æŒæ’¤é”€å·²åº”ç”¨çš„ä¼˜åŒ–å»ºè®®

---

## ğŸ—ï¸ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### å‰ç«¯å®ç°
```typescript
// æ–‡æœ¬é€‰æ‹©ç›‘å¬å™¨
interface TextOptimizationService {
  // è·å–ä¼˜åŒ–å»ºè®®
  getOptimizationSuggestions(text: string): Promise<OptimizationSuggestion[]>
  
  // åº”ç”¨ä¼˜åŒ–å»ºè®®
  applySuggestion(suggestion: OptimizationSuggestion): void
  
  // æ‹’ç»å»ºè®®
  rejectSuggestion(suggestionId: string): void
}

interface OptimizationSuggestion {
  id: string
  type: 'grammar' | 'expression' | 'structure'
  originalText: string
  optimizedText: string
  explanation: string
  confidence: number
}
```

### åç«¯APIè®¾è®¡
```typescript
// POST /api/v1/ai/optimize-text
interface OptimizeTextRequest {
  text: string
  userId: string
  context?: string
  optimizationType?: 'grammar' | 'expression' | 'structure' | 'all'
}

interface OptimizeTextResponse {
  suggestions: OptimizationSuggestion[]
  processingTime: number
  requestId: string
}
```

### AIæœåŠ¡é›†æˆ
```typescript
// DeepSeek APIé›†æˆ
class DeepSeekOptimizationService {
  async optimizeText(text: string): Promise<OptimizationResult> {
    const prompt = `è¯·ä¼˜åŒ–ä»¥ä¸‹æ–‡æœ¬çš„è¡¨è¾¾è´¨é‡ï¼š
    åŸæ–‡ï¼š${text}
    
    è¯·æä¾›ï¼š
    1. è¯­æ³•ä¿®æ­£å»ºè®®
    2. è¡¨è¾¾æ”¹è¿›å»ºè®®  
    3. ç»“æ„è°ƒæ•´å»ºè®®
    
    è¿”å›JSONæ ¼å¼ç»“æœã€‚`
    
    return await this.callDeepSeekAPI(prompt)
  }
}
```

---

## ğŸ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡

### æ–‡æœ¬é€‰æ‹©ä¼˜åŒ–ç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¾‘å™¨å†…å®¹åŒºåŸŸ                                          â”‚
â”‚                                                         â”‚
â”‚ è¿™æ˜¯ä¸€æ®µéœ€è¦ä¼˜åŒ–çš„æ–‡æœ¬å†…å®¹[è¢«é€‰ä¸­çš„æ–‡æœ¬]å…¶ä»–å†…å®¹...     â”‚
â”‚                           â†‘                            â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                    â”‚ ğŸ¤– AIä¼˜åŒ–å»ºè®®   â”‚                 â”‚
â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚                    â”‚ âœï¸ è¯­æ³•ä¿®æ­£ (2) â”‚                 â”‚
â”‚                    â”‚ ğŸ’¡ è¡¨è¾¾æ”¹è¿› (1) â”‚                 â”‚
â”‚                    â”‚ ğŸ”„ ç»“æ„è°ƒæ•´ (1) â”‚                 â”‚
â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚                    â”‚ [å…¨éƒ¨åº”ç”¨] [æŸ¥çœ‹è¯¦æƒ…] â”‚             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜åŒ–å»ºè®®è¯¦æƒ…ç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AIä¼˜åŒ–å»ºè®®è¯¦æƒ…                               [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŸæ–‡: "è¿™ä¸ªç®—æ³•çš„æ•ˆç‡ä¸æ˜¯å¾ˆå¥½"                          â”‚
â”‚                                                         â”‚
â”‚ ğŸ’¡ è¡¨è¾¾æ”¹è¿›å»ºè®®:                                        â”‚
â”‚ "è¿™ä¸ªç®—æ³•çš„æ•ˆç‡æœ‰å¾…æå‡"                                â”‚
â”‚ è¯´æ˜: ä½¿ç”¨æ›´ä¸“ä¸šå’Œç§¯æçš„è¡¨è¾¾æ–¹å¼                        â”‚
â”‚ ç½®ä¿¡åº¦: 85%                                             â”‚
â”‚                                                         â”‚
â”‚ [åº”ç”¨æ­¤å»ºè®®] [æ‹’ç»] [æŸ¥çœ‹å…¶ä»–å»ºè®®]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ•°æ®æ¨¡å‹è®¾è®¡

### æ•°æ®åº“è¡¨ç»“æ„
```sql
-- ä¼˜åŒ–è¯·æ±‚è®°å½•è¡¨
CREATE TABLE optimization_requests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    note_id UUID REFERENCES notes(id),
    original_text TEXT NOT NULL,
    request_type VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    processing_time_ms INTEGER,
    status VARCHAR(20) DEFAULT 'pending'
);

-- ä¼˜åŒ–å»ºè®®è¡¨
CREATE TABLE optimization_suggestions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    request_id UUID NOT NULL REFERENCES optimization_requests(id),
    suggestion_type VARCHAR(50) NOT NULL,
    original_text TEXT NOT NULL,
    optimized_text TEXT NOT NULL,
    explanation TEXT,
    confidence_score DECIMAL(3,2),
    is_applied BOOLEAN DEFAULT FALSE,
    applied_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ç”¨æˆ·åé¦ˆè¡¨
CREATE TABLE optimization_feedback (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    suggestion_id UUID NOT NULL REFERENCES optimization_suggestions(id),
    user_id UUID NOT NULL REFERENCES users(id),
    feedback_type VARCHAR(20) NOT NULL, -- 'accept', 'reject', 'modify'
    user_rating INTEGER CHECK (user_rating >= 1 AND user_rating <= 5),
    feedback_text TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- [ ] AI APIè°ƒç”¨æµ‹è¯•
- [ ] æ–‡æœ¬å¤„ç†é€»è¾‘æµ‹è¯•
- [ ] ç¼“å­˜æœºåˆ¶æµ‹è¯•
- [ ] é”™è¯¯å¤„ç†æµ‹è¯•

### é›†æˆæµ‹è¯•
- [ ] å‰åç«¯APIé›†æˆæµ‹è¯•
- [ ] DeepSeek APIé›†æˆæµ‹è¯•
- [ ] æ•°æ®åº“æ“ä½œæµ‹è¯•
- [ ] ç”¨æˆ·æƒé™éªŒè¯æµ‹è¯•

### ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [ ] æ–‡æœ¬é€‰æ‹©äº¤äº’æµ‹è¯•
- [ ] ä¼˜åŒ–å»ºè®®å±•ç¤ºæµ‹è¯•
- [ ] å“åº”æ—¶é—´æµ‹è¯•
- [ ] å¤šæµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- [ ] å¹¶å‘ç”¨æˆ·æµ‹è¯• (100ç”¨æˆ·)
- [ ] APIå“åº”æ—¶é—´æµ‹è¯• (< 3ç§’)
- [ ] å†…å­˜ä½¿ç”¨æµ‹è¯•
- [ ] æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½æµ‹è¯•

---

## ğŸ“ˆ ç›‘æ§æŒ‡æ ‡

### ä¸šåŠ¡æŒ‡æ ‡
- **ä½¿ç”¨ç‡**: æ¯æ—¥ä½¿ç”¨æ–‡æœ¬ä¼˜åŒ–åŠŸèƒ½çš„ç”¨æˆ·æ•°
- **é‡‡çº³ç‡**: ç”¨æˆ·é‡‡çº³AIå»ºè®®çš„æ¯”ä¾‹
- **æ»¡æ„åº¦**: ç”¨æˆ·å¯¹ä¼˜åŒ–å»ºè®®çš„è¯„åˆ†
- **é¢‘æ¬¡**: ç”¨æˆ·å¹³å‡æ¯å¤©ä½¿ç”¨æ¬¡æ•°

### æŠ€æœ¯æŒ‡æ ‡
- **å“åº”æ—¶é—´**: APIå¹³å‡å“åº”æ—¶é—´
- **æˆåŠŸç‡**: APIè°ƒç”¨æˆåŠŸç‡
- **é”™è¯¯ç‡**: ç³»ç»Ÿé”™è¯¯å‘ç”Ÿç‡
- **å¹¶å‘é‡**: åŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°é‡

---

## ğŸš€ å®æ–½è®¡åˆ’

### Week 1: åŸºç¡€æ¶æ„
- [ ] AIæœåŠ¡æ¥å£è®¾è®¡
- [ ] æ•°æ®åº“è¡¨ç»“æ„åˆ›å»º
- [ ] åŸºç¡€APIå¼€å‘

### Week 2: æ ¸å¿ƒåŠŸèƒ½
- [ ] DeepSeek APIé›†æˆ
- [ ] æ–‡æœ¬ä¼˜åŒ–é€»è¾‘å®ç°
- [ ] ç¼“å­˜æœºåˆ¶å®ç°

### Week 3: å‰ç«¯ç•Œé¢
- [ ] æ–‡æœ¬é€‰æ‹©äº¤äº’å®ç°
- [ ] ä¼˜åŒ–å»ºè®®ç•Œé¢å¼€å‘
- [ ] ç”¨æˆ·æ“ä½œé€»è¾‘å®ç°

### Week 4: æµ‹è¯•ä¸ä¼˜åŒ–
- [ ] å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **Epicæ–‡æ¡£**: [Epic 1: æ™ºèƒ½ç¬”è®°åˆ›ä½œç³»ç»Ÿ](../epics/epic-1-intelligent-note-creation.md)
- **æ¶æ„è®¾è®¡**: [ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£](../architecture.md)
- **UXè®¾è®¡**: [ç”¨æˆ·ä½“éªŒè®¾è®¡æ–‡æ¡£](../ux-design.md)
- **APIæ–‡æ¡£**: å¾…å¼€å‘å®Œæˆåæä¾›

---

**StoryçŠ¶æ€**: ğŸ“‹ å·²åˆ†ç‰‡ï¼Œå‡†å¤‡å¼€å‘  
**ä¸‹ä¸€æ­¥**: å¼€å§‹æŠ€æœ¯å®ç°å’Œå¼€å‘å·¥ä½œ
